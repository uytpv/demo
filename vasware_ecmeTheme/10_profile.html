<!DOCTYPE html>
<html class="light" lang="vi">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Hồ sơ người dùng - VasWare</title>
  <link rel="stylesheet" href="css/base/reset.css" />
  <link rel="stylesheet" href="css/variables.css" />
  <link rel="stylesheet" href="css/components/components.css" />
  <link rel="stylesheet" href="css/layouts/main-layout.css" />
  <link rel="stylesheet" href="css/pages/profile/profile.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
    rel="stylesheet" />
</head>

<body>
  <div class="main-layout">
    <!-- Top Navigation -->
    <div class="top-nav">
      <button class="top-nav-menu-btn" id="menuBtn">
        <span class="material-symbols-outlined">menu</span>
      </button>
      <div class="top-nav-center">
        <div class="top-nav-logo">
          <img src="assets/images/logo.png" alt="VasWare Logo" />
        </div>
        <div class="top-nav-title">VasWare</div>
      </div>
      <button class="top-nav-notification-btn">
        <span class="material-symbols-outlined">notifications</span>
        <span class="notification-badge"></span>
      </button>
    </div>

    <!-- Main Layout Wrapper -->
    <div class="main-layout-wrapper">
      <!-- Sidebar Menu -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-section">
          <nav>
            <a href="03_select_warehouse.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">schedule</span>
              <span>Thẻ giờ</span>
            </a>
            <a href="09_sickleave.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">sick</span>
              <span>Nghỉ bệnh</span>
            </a>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">help</span>
              <span>Hướng dẫn</span>
            </a>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">policy</span>
              <span>Quy định làm việc</span>
            </a>
            <a href="10_profile.html" class="sidebar-link active">
              <span class="sidebar-icon material-symbols-outlined">person</span>
              <span>Hồ sơ người dùng</span>
            </a>
          </nav>
        </div>

        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
          <nav>
            <a href="12_settings.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">settings</span>
              <span>Cài đặt</span>
            </a>
            <a href="index.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">logout</span>
              <span>Đăng xuất</span>
            </a>
          </nav>
          <div class="sidebar-user">
            <div class="sidebar-user-email">nhanvien@vasware.com</div>
            <div class="sidebar-user-role">Internal worker</div>
          </div>
          <div class="sidebar-version">v1.0.0</div>
        </div>
      </aside>

      <!-- Sidebar Overlay (Mobile) -->
      <div class="sidebar-overlay" id="sidebarOverlay"></div>

      <!-- Main Content -->
      <div class="main-content-area">
        <div class="list">
          <div class="profile-content" id="profileContent">

            <!-- Info Message (in edit mode) -->
            <div class="profile-info" id="editModeInfo" style="display: none;">
              <span class="material-symbols-outlined">info</span>
              <div class="profile-info-text">
                Chế độ chỉnh sửa: Bạn có thể cập nhật thông tin liên hệ bên dưới.
              </div>
            </div>

            <!-- Employee ID Card -->
            <div class="employee-card">
              <!-- Edit Button in Corner -->
              <button class="employee-card-edit" id="editBtn" aria-label="Chỉnh sửa">
                <span class="material-symbols-outlined">edit</span>
              </button>

              <!-- Card Header with Avatar and Name -->
              <div class="employee-card-header">
                <div class="employee-avatar">
                  <span class="material-symbols-outlined">person</span>
                </div>
                <div class="employee-info">
                  <div class="employee-name-display">
                    <span id="displayFullName">Nguyễn Văn A</span>
                  </div>
                  <div class="employee-name-edit">
                    <div class="name-field-group">
                      <div class="name-field">
                        <label class="name-field-label">Họ</label>
                        <input type="text" class="name-field-input" id="fieldLastName" value="Nguyễn"
                          placeholder="Nhập họ" />
                      </div>
                      <div class="name-field">
                        <label class="name-field-label">Tên</label>
                        <input type="text" class="name-field-input" id="fieldFirstName" value="Văn A"
                          placeholder="Nhập tên" />
                      </div>
                    </div>
                  </div>
                  <div class="employee-role">Internal Worker</div>
                  <span class="status-badge active">
                    <span class="material-symbols-outlined">check_circle</span>
                    <span>Đang hoạt động</span>
                  </span>
                </div>
              </div>

              <!-- Email and Phone fields (in edit mode) -->
              <div class="employee-contact-edit">
                <!-- Email -->
                <div class="employee-edit-field">
                  <label class="employee-edit-label">Email</label>
                  <input type="email" class="employee-edit-input" id="fieldEmail" value="nhanvien@vasware.com"
                    placeholder="Nhập email" />
                </div>

                <!-- Phone -->
                <div class="employee-edit-field">
                  <label class="employee-edit-label">Số điện thoại</label>
                  <input type="tel" class="employee-edit-input" id="fieldPhone" value="+358 40 123 4567"
                    placeholder="Nhập số điện thoại" />
                </div>
              </div>

              <!-- Action Buttons (in edit mode) -->
              <div class="profile-actions" id="editActions" style="display: none;">
                <button class="profile-btn profile-btn-cancel" id="cancelBtn">
                  <span class="material-symbols-outlined">close</span>
                  <span>Hủy</span>
                </button>
                <button class="profile-btn profile-btn-save" id="saveBtn">
                  <span class="material-symbols-outlined">save</span>
                  <span>Lưu thay đổi</span>
                </button>
              </div>

              <!-- Card Details -->
              <div class="employee-details">
                <!-- Row 1, Col 1: Employee ID -->
                <div class="employee-detail-item">
                  <div class="employee-detail-icon">
                    <span class="material-symbols-outlined">badge</span>
                  </div>
                  <div class="employee-detail-content">
                    <div class="employee-detail-label">Employee ID</div>
                    <div class="employee-detail-value">EMP001</div>
                  </div>
                </div>

                <!-- Row 1, Col 2: Social Number -->
                <div class="employee-detail-item">
                  <div class="employee-detail-icon">
                    <span class="material-symbols-outlined">fingerprint</span>
                  </div>
                  <div class="employee-detail-content">
                    <div class="employee-detail-label">Social Number</div>
                    <div class="employee-detail-value">010185-1234</div>
                  </div>
                </div>

                <!-- Row 2, Col 1: Lần cuối -->
                <div class="employee-detail-item">
                  <div class="employee-detail-icon">
                    <span class="material-symbols-outlined">schedule</span>
                  </div>
                  <div class="employee-detail-content">
                    <div class="employee-detail-label">Lần cuối</div>
                    <div class="employee-detail-value">12/01/2026 19:10</div>
                  </div>
                </div>

                <!-- Row 2, Col 2: Date Joined -->
                <div class="employee-detail-item">
                  <div class="employee-detail-icon">
                    <span class="material-symbols-outlined">event</span>
                  </div>
                  <div class="employee-detail-content">
                    <div class="employee-detail-label">Ngày tham gia</div>
                    <div class="employee-detail-value">15/09/2024</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Contact Information Card -->
            <div class="contact-card">
              <h3 class="contact-card-title">
                <span class="material-symbols-outlined">contact_phone</span>
                <span>Thông tin liên hệ</span>
              </h3>

              <div class="contact-fields">
                <!-- Email -->
                <div class="contact-field">
                  <div class="contact-field-icon">
                    <span class="material-symbols-outlined">email</span>
                  </div>
                  <div class="contact-field-content">
                    <div class="contact-field-label">Email</div>
                    <div class="contact-field-value">
                      <span class="display-text" id="displayEmail">nhanvien@vasware.com</span>
                    </div>
                  </div>
                </div>

                <!-- Phone -->
                <div class="contact-field">
                  <div class="contact-field-icon">
                    <span class="material-symbols-outlined">phone</span>
                  </div>
                  <div class="contact-field-content">
                    <div class="contact-field-label">Số điện thoại</div>
                    <div class="contact-field-value">
                      <span class="display-text" id="displayPhone">+358 40 123 4567</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Sidebar toggle
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');

    function toggleSidebar() {
      sidebar.classList.toggle('open');
      sidebarOverlay.classList.toggle('open');
    }

    menuBtn.addEventListener('click', toggleSidebar);
    sidebarOverlay.addEventListener('click', toggleSidebar);

    // Edit mode functionality
    const profileContent = document.getElementById('profileContent');
    const editBtn = document.getElementById('editBtn');
    const saveBtn = document.getElementById('saveBtn');
    const cancelBtn = document.getElementById('cancelBtn');
    const editActions = document.getElementById('editActions');
    const editModeInfo = document.getElementById('editModeInfo');

    // Editable fields
    const fieldFirstName = document.getElementById('fieldFirstName');
    const fieldLastName = document.getElementById('fieldLastName');
    const fieldEmail = document.getElementById('fieldEmail');
    const fieldPhone = document.getElementById('fieldPhone');

    // Display elements
    const displayFullName = document.getElementById('displayFullName');
    const displayEmail = document.getElementById('displayEmail');
    const displayPhone = document.getElementById('displayPhone');

    // Update display values on page load
    displayEmail.textContent = fieldEmail.value;
    displayPhone.textContent = fieldPhone.value;

    // Store original values for cancel
    let originalValues = {};

    function enterEditMode() {
      profileContent.classList.add('edit-mode');
      editBtn.style.display = 'none';
      editActions.style.display = 'flex';
      editModeInfo.style.display = 'flex';

      // Store original values
      originalValues.firstName = fieldFirstName.value;
      originalValues.lastName = fieldLastName.value;
      originalValues.email = fieldEmail.value;
      originalValues.phone = fieldPhone.value;
    }

    function exitEditMode(save = false) {
      profileContent.classList.remove('edit-mode');
      editBtn.style.display = 'flex';
      editActions.style.display = 'none';
      editModeInfo.style.display = 'none';

      if (!save) {
        // Restore original values
        fieldFirstName.value = originalValues.firstName;
        fieldLastName.value = originalValues.lastName;
        fieldEmail.value = originalValues.email;
        fieldPhone.value = originalValues.phone;
      } else {
        // Update display values
        displayFullName.textContent = fieldLastName.value + ' ' + fieldFirstName.value;
        displayEmail.textContent = fieldEmail.value;
        displayPhone.textContent = fieldPhone.value;
      }
    }

    editBtn.addEventListener('click', enterEditMode);

    cancelBtn.addEventListener('click', () => {
      if (confirm('Bạn có chắc muốn hủy các thay đổi?')) {
        exitEditMode(false);
      }
    });

    saveBtn.addEventListener('click', () => {
      // Validate fields
      const firstName = fieldFirstName.value.trim();
      const lastName = fieldLastName.value.trim();
      const email = fieldEmail.value.trim();
      const phone = fieldPhone.value.trim();

      if (!firstName || !lastName || !email || !phone) {
        alert('Vui lòng điền đầy đủ các trường bắt buộc');
        return;
      }

      // Email validation
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Email không hợp lệ');
        return;
      }

      // Simulate save
      exitEditMode(true);
      alert('Thông tin đã được cập nhật thành công!');
    });

    // Dark mode support
    const htmlElement = document.documentElement;
    const observer = new MutationObserver(() => {
      // Can add any dark mode specific logic here if needed
    });
    observer.observe(htmlElement, { attributes: true, attributeFilter: ['class'] });
  </script>
</body>

</html>