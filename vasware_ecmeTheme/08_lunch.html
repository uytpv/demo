<!DOCTYPE html>
<html class="light" lang="vi">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Ăn trưa - VasWare</title>
  <link rel="stylesheet" href="css/base/reset.css" />
  <link rel="stylesheet" href="css/variables.css" />
  <link rel="stylesheet" href="css/components/components.css" />
  <link rel="stylesheet" href="css/layouts/main-layout.css" />
  <link rel="stylesheet" href="css/pages/break/break.css" />
  <link rel="stylesheet" href="css/components/fab-menu.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
    rel="stylesheet" />
</head>

<body>
  <div class="main-layout">
    <!-- Top Navigation -->
    <div class="top-nav">
      <button class="top-nav-menu-btn" id="menuBtn">
        <span class="material-symbols-outlined">menu</span>
      </button>
      <div class="top-nav-center">
        <div class="top-nav-logo">
          <img src="assets/images/logo.png" alt="VasWare Logo" />
        </div>
        <div class="top-nav-title">VasWare</div>
      </div>
      <button class="top-nav-notification-btn">
        <span class="material-symbols-outlined">notifications</span>
        <span class="notification-badge"></span>
      </button>
    </div>

    <!-- Main Layout Wrapper -->
    <div class="main-layout-wrapper">
      <!-- Sidebar Menu -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-section">
          <nav>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">schedule</span>
              <span>Thẻ giờ</span>
            </a>
            <a href="09_sickleave.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">sick</span>
              <span>Nghỉ bệnh</span>
            </a>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">help</span>
              <span>Hướng dẫn</span>
            </a>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">policy</span>
              <span>Quy định làm việc</span>
            </a>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">person</span>
              <span>Hồ sơ người dùng</span>
            </a>
          </nav>
        </div>

        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
          <nav>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">settings</span>
              <span>Cài đặt</span>
            </a>
            <a href="index.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">logout</span>
              <span>Đăng xuất</span>
            </a>
          </nav>
          <div class="sidebar-user">
            <div class="sidebar-user-email">nhanvien@vasware.com</div>
            <div class="sidebar-user-role">Internal worker</div>
          </div>
          <div class="sidebar-version">v1.0.0</div>
        </div>
      </aside>

      <!-- Sidebar Overlay (Mobile) -->
      <div class="sidebar-overlay" id="sidebarOverlay"></div>

      <!-- Main Content -->
      <div class="main-content-area">
        <div class="list">
          <!-- Lunch Content -->
          <div class="break-content">
            <!-- Decorative Background -->
            <div class="break-bg lunch-bg"></div>

            <!-- Icon -->
            <div class="break-icon lunch-icon">
              <span class="material-symbols-outlined">restaurant</span>
            </div>

            <!-- Title and Subtitle -->
            <h1 class="break-title">Ăn trưa</h1>
            <p class="break-subtitle">Thời gian nghỉ ngơi và nạp năng lượng</p>

            <!-- Timer Card -->
            <div class="timer-card">
              <div class="break-timer counting" id="lunchTimer">30:00</div>
              <div class="timer-label">Thời gian còn lại</div>
              <div class="timer-progress">
                <div class="timer-progress-bar lunch-progress-bar" id="progressBar"></div>
              </div>
            </div>

            <!-- Info Cards -->
            <div class="break-info">
              <div class="info-card">
                <div class="info-label">Bắt đầu</div>
                <div class="info-value" id="startTime">--:--</div>
              </div>
              <div class="info-card">
                <div class="info-label">Kết thúc</div>
                <div class="info-value" id="endTime">--:--</div>
              </div>
            </div>

            <!-- Continue Button -->
            <button class="btn-continue" id="continueBtn">
              <span>Tiếp tục làm việc</span>
              <span class="material-symbols-outlined">arrow_forward</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- FAB Menu -->
  <div class="fab-overlay" id="fabOverlay"></div>

  <div class="fab-speed-dial">
    <div class="fab-speed-dial-actions" id="fabActions"></div>
  </div>

  <button class="fab-button" id="fabButton" aria-label="Menu hành động">
    <span class="material-symbols-outlined fab-icon">more_vert</span>
  </button>

  <script>
    // Sidebar toggle
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');

    function toggleSidebar() {
      sidebar.classList.toggle('open');
      sidebarOverlay.classList.toggle('open');
    }

    menuBtn.addEventListener('click', toggleSidebar);
    sidebarOverlay.addEventListener('click', toggleSidebar);

    // Time formatting
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
    }

    function formatClock(date) {
      const hours = date.getHours();
      const mins = date.getMinutes();
      return `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}`;
    }

    // Initialize start and end times
    const now = new Date();
    const endDate = new Date(now.getTime() + 30 * 60 * 1000);
    document.getElementById('startTime').textContent = formatClock(now);
    document.getElementById('endTime').textContent = formatClock(endDate);

    // Lunch timer countdown (30 minutes)
    const lunchDuration = 30 * 60;
    let remainingTime = lunchDuration;
    const timerDisplay = document.getElementById('lunchTimer');
    const progressBar = document.getElementById('progressBar');

    function updateTimer() {
      timerDisplay.textContent = formatTime(remainingTime);

      // Update progress bar
      const progress = ((lunchDuration - remainingTime) / lunchDuration) * 100;
      progressBar.style.width = progress + '%';

      if (remainingTime > 0) {
        remainingTime--;
      } else {
        clearInterval(timerInterval);
        window.location.href = '05_select_product.html';
      }
    }

    // Update every second
    const timerInterval = setInterval(updateTimer, 1000);

    // Auto-redirect after 30 minutes
    setTimeout(() => {
      window.location.href = '05_select_product.html';
    }, lunchDuration * 1000);

    // Continue button
    document.getElementById('continueBtn').addEventListener('click', () => {
      clearInterval(timerInterval);
      window.location.href = '05_select_product.html';
    });
  </script>
</body>

</html>