<!DOCTYPE html>
<html class="light" lang="vi">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Chọn Khách Hàng & Công Việc - VasWare</title>
  <link rel="stylesheet" href="css/base/reset.css" />
  <link rel="stylesheet" href="css/variables.css" />
  <link rel="stylesheet" href="css/components/components.css" />
  <link rel="stylesheet" href="css/layouts/main-layout.css" />
  <link rel="stylesheet" href="css/components/page-heading.css" />
  <link rel="stylesheet" href="css/components/list.css" />
  <link rel="stylesheet" href="css/pages/customer-task/customer-task.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
    rel="stylesheet" />
</head>

<body>
  <div class="main-layout">
    <!-- Top Navigation -->
    <div class="top-nav">
      <button class="top-nav-menu-btn" id="menuBtn">
        <span class="material-symbols-outlined">menu</span>
      </button>
      <div class="top-nav-center">
        <div class="top-nav-logo">
          <img src="assets/images/logo.png" alt="VasWare Logo"
            style="width: 100%; height: 100%; object-fit: contain;" />
        </div>
        <div class="top-nav-title">VasWare</div>
      </div>
      <button class="top-nav-notification-btn">
        <span class="material-symbols-outlined">notifications</span>
        <span class="notification-badge"></span>
      </button>
    </div>

    <!-- Main Layout Wrapper -->
    <div class="main-layout-wrapper">
      <!-- Sidebar Menu -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-section">
          <nav style="display: flex; flex-direction: column; gap: 8px;">
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">schedule</span>
              <span>Thẻ giờ</span>
            </a>
            <a href="09_sickleave.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">sick</span>
              <span>Nghỉ bệnh</span>
            </a>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">help</span>
              <span>Hướng dẫn</span>
            </a>
            <a href="#" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">policy</span>
              <span>Quy định làm việc</span>
            </a>
            <a href="10_profile.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">person</span>
              <span>Hồ sơ người dùng</span>
            </a>
          </nav>
        </div>

        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
          <nav style="display: flex; flex-direction: column; gap: 8px;">
            <a href="12_settings.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">settings</span>
              <span>Cài đặt</span>
            </a>
            <a href="index.html" class="sidebar-link">
              <span class="sidebar-icon material-symbols-outlined">logout</span>
              <span>Đăng xuất</span>
            </a>
          </nav>
          <div class="sidebar-user">
            <div class="sidebar-user-email">nhanvien@vasware.com</div>
            <div style="font-size: 12px; color: #9ca3af;">Internal worker</div>
          </div>
          <div class="sidebar-version">v1.0.0</div>
        </div>
      </aside>

      <!-- Sidebar Overlay (Mobile) -->
      <div class="sidebar-overlay" id="sidebarOverlay"></div>

      <!-- Main Content -->
      <div class="main-content-area">
        <div class="list">
          <div class="list-header">
            <h2 class="page-heading">Bắt đầu làm việc</h2>
            <p class="page-subheading">Chọn Khách hàng và Loại công việc để bắt đầu</p>
          </div>

          <!-- Info Alert Section -->
          <div class="customer-task-alert">
            <div class="alert-icon">
              <span class="material-symbols-outlined">info</span>
            </div>
            <div class="alert-content">
              <p class="alert-title">Chú ý!</p>
              <p class="alert-message">Bạn đã đăng nhập <strong>Posti Tuusula</strong></p>
              <p class="alert-time">từ: <strong>19:54</strong> ngày <strong>6.1.2026</strong></p>
            </div>
          </div>

          <!-- Select Customer Section -->
          <div class="list-section">
            <h3 class="list-section-title">Chọn Khách Hàng</h3>
            <select class="customer-task-select" id="customerSelect">
              <option value="">-- Chọn khách hàng --</option>
              <option value="1">C-Halli: Finnair</option>
              <option value="2">C-Halli: Inventointi</option>
              <option value="4">C-Halli: Lähetys / Dispatch</option>
              <option value="5">C-Halli: Prescott (e-työkortti)</option>
              <option value="6">C-Hallii: Vastaanotto / Receiving</option>
              <option value="7">Palkkitie A-Halli</option>
              <option value="8">Palkkitie D-Halli</option>
            </select>
          </div>

          <!-- Select Task Section -->
          <div class="list-section">
            <h3 class="list-section-title">Chọn Công Việc</h3>
            <select class="customer-task-select" id="taskSelect" disabled>
              <option value="">-- Chọn công việc --</option>
            </select>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="customer-task-actions">
          <button class="customer-task-btn customer-task-btn-danger" id="endWorkBtn">Kết thúc làm việc</button>
          <button class="customer-task-btn customer-task-btn-primary" id="startWorkBtn" disabled>Bắt đầu làm
            việc</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="modal" id="confirmModal">
    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Cảnh báo</h2>
        <button class="modal-close" id="modalCloseBtn">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
      <div class="modal-body">
        <p class="modal-message">Bạn đang chọn dừng công việc. Bằng cách chọn này, dấu thời gian sẽ dừng lại.</p>
      </div>
      <div class="modal-footer">
        <button class="modal-btn modal-btn-secondary" id="modalCancelBtn">Hủy</button>
        <a href="03_select_warehouse.html" class="modal-btn modal-btn-danger">Kết thúc làm việc</a>
      </div>
    </div>
  </div>

  <script>
    const menuBtn = document.getElementById('menuBtn');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const customerSelect = document.getElementById('customerSelect');
    const taskSelect = document.getElementById('taskSelect');
    const startWorkBtn = document.getElementById('startWorkBtn');
    const endWorkBtn = document.getElementById('endWorkBtn');
    const confirmModal = document.getElementById('confirmModal');
    const modalOverlay = document.getElementById('modalOverlay');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    const modalCancelBtn = document.getElementById('modalCancelBtn');

    // Task data per customer
    const tasksByCustomer = {
      1: [
        { value: 'task1', label: 'Sản xuất sơn' },
        { value: 'task2', label: 'Kiểm tra chất lượng' },
        { value: 'task3', label: 'Đóng gói' }
      ],
      2: [
        { value: 'task4', label: 'Lắp ráp' },
        { value: 'task5', label: 'Kiểm thử' }
      ],
      3: [
        { value: 'task6', label: 'Phát triển' },
        { value: 'task7', label: 'Testing' },
        { value: 'task8', label: 'Triển khai' }
      ],
      4: [
        { value: 'task9', label: 'Phát triển' },
        { value: 'task10', label: 'Testing' },
        { value: 'task11', label: 'Triển khai' }
      ],
      5: [
        { value: 'task12', label: 'VAS yleistyöt' },
        { value: 'task13', label: 'Sót Mì / Noodle sauce' },
        { value: 'task14', label: 'Lunch/Ruokatauko' },
        { value: 'task15', label: 'Rummo Display' },
        { value: 'task16', label: 'Display Mì / Noodle Display' },
        { value: 'task17', label: 'Nuudelikupin uunittaminen' },
        { value: 'task18', label: 'Bim Bim / Snacks' },
        { value: 'task19', label: 'Mì Tô / Bowl' },
        { value: 'task20', label: 'Mì Ly / Noodles Cup' },
        { value: 'task21', label: 'Mì / Noodles' },
      ]
    };

    // Toggle sidebar
    function toggleSidebar() {
      sidebar.classList.toggle('open');
      sidebarOverlay.classList.toggle('open');
    }

    menuBtn.addEventListener('click', toggleSidebar);
    sidebarOverlay.addEventListener('click', toggleSidebar);

    // Customer selection changes task list
    customerSelect.addEventListener('change', function () {
      const customerId = this.value;
      taskSelect.innerHTML = '<option value="">-- Chọn công việc --</option>';

      if (customerId && tasksByCustomer[customerId]) {
        taskSelect.disabled = false;
        tasksByCustomer[customerId].forEach(task => {
          const option = document.createElement('option');
          option.value = task.value;
          option.textContent = task.label;
          taskSelect.appendChild(option);
        });
        // Reset task selection
        taskSelect.value = '';
      } else {
        taskSelect.disabled = true;
      }

      checkFormValidity();
    });

    // Task selection check
    taskSelect.addEventListener('change', checkFormValidity);

    // Check if both customer and task are selected
    function checkFormValidity() {
      const customerSelected = customerSelect.value !== '';
      const taskSelected = taskSelect.value !== '';
      startWorkBtn.disabled = !(customerSelected && taskSelected);
    }

    // End work button - show modal
    endWorkBtn.addEventListener('click', function () {
      confirmModal.classList.add('open');
    });

    // Close modal
    function closeModal() {
      confirmModal.classList.remove('open');
    }

    modalOverlay.addEventListener('click', closeModal);
    modalCloseBtn.addEventListener('click', closeModal);
    modalCancelBtn.addEventListener('click', closeModal);

    // Start work button
    startWorkBtn.addEventListener('click', function () {
      if (customerSelect.value && taskSelect.value) {
        window.location.href = '05_select_product.html';
      }
    });
  </script>
</body>

</html>